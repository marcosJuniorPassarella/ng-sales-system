"use strict";(self.webpackChunkng_sales_system=self.webpackChunkng_sales_system||[]).push([[293],{9293:(Q,y,a)=>{a.r(y),a.d(y,{CategoriesModule:()=>B});var E=a(6895),c=a(433),h=a(8250),v=a(7579),d=a(2722),l=(()=>{return(o=l||(l={})).ADD_CATEGORY_ACTION="Adicionar Categoria",o.EDIT_CATEGORY_ACTION="Editar Categoria",l;var o})(),e=a(8256),u=a(5849),m=a(805),f=a(3634),C=a(5593),A=a(1740);let x=(()=>{class o{constructor(t,r,n,i){this.ref=t,this.formBuilder=r,this.messageService=n,this.categoriesService=i,this.destroy$=new v.x,this.addCategoryAction=l.ADD_CATEGORY_ACTION,this.editCategoryAction=l.EDIT_CATEGORY_ACTION,this.categoryForm=this.formBuilder.group({name:["",c.kI.required]})}ngOnInit(){this.categoryAction=this.ref.data,this.categoryAction?.event?.action===l.EDIT_CATEGORY_ACTION&&null!==this.categoryAction?.event?.categoryName&&this.setCategoryFormName(this.categoryAction?.event?.categoryName)}handleSubmitCategoryAction(){this.categoryAction?.event?.action===this.addCategoryAction?this.handleSubmitAddCategory():this.categoryAction?.event?.action===this.editCategoryAction&&this.handleSubmitEditCategory()}handleSubmitAddCategory(){this.categoryForm?.value&&this.categoryForm?.valid&&this.categoriesService.createNewCategory({name:this.categoryForm.value.name}).pipe((0,d.R)(this.destroy$)).subscribe({next:r=>{r&&this.messageService.add({severity:"success",summary:"Sucesso",detail:"Categoria criada com sucesso!",life:3e3}),this.categoryForm.reset()},error:r=>{console.log(r),this.messageService.add({severity:"error",summary:"Erro",detail:"Erro ao criar categoria!",life:3e3}),this.categoryForm.reset()}})}handleSubmitEditCategory(){this.categoryForm?.value&&this.categoryForm?.valid&&this.categoryAction?.event?.id&&this.categoriesService.editCategoryName({name:this.categoryForm.value.name,category_id:this.categoryAction?.event?.id}).pipe((0,d.R)(this.destroy$)).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Sucesso",detail:"Categoria editada com sucesso!",life:3e3}),this.categoryForm.reset()},error:r=>{console.log(r),this.messageService.add({severity:"error",summary:"Erro",detail:"Erro ao editar categoria!",life:3e3}),this.categoryForm.reset()}})}setCategoryFormName(t){t&&this.categoryForm.setValue({name:t})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.S),e.Y36(c.qu),e.Y36(m.ez),e.Y36(f.G))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-category-form"]],decls:6,vars:2,consts:[[3,"formGroup","ngSubmit"],[1,"card","flex","flex-column","md:flex-collumn","gap-3"],["pInputText","","placeholder","Nome","formControlName","name"],[1,"flex","flex-row","justify-content-center","align-content-center","align-items-center"],["type","submit","label","Concluir",3,"disabled"]],template:function(t,r){1&t&&(e.TgZ(0,"div")(1,"form",0),e.NdJ("ngSubmit",function(){return r.handleSubmitCategoryAction()}),e.TgZ(2,"div",1),e._UZ(3,"input",2),e.TgZ(4,"div",3),e._UZ(5,"p-button",4),e.qZA()()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",r.categoryForm),e.xp6(4),e.Q6J("disabled",!r.categoryForm.valid))},dependencies:[c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,C.zx,A.o],encapsulation:2}),o})();var S=a(52),T=a(4247),p=a(4684),b=a(2137),F=a(4431);function D(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"th",7)(2,"div",8)(3,"div",8),e._uU(4," Nome "),e.qZA(),e.TgZ(5,"div",8),e._UZ(6,"p-sortIcon",9)(7,"p-columnFilter",10),e.qZA()()(),e.TgZ(8,"th")(9,"div",11)(10,"p-button",12),e.NdJ("onClick",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.handleCategoryEvent(n.addCategoryAction))}),e.qZA()()()()}2&o&&(e.xp6(7),e.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1))}function Z(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"shorten"),e.qZA(),e.TgZ(4,"td")(5,"div",13)(6,"button",14),e.NdJ("click",function(){const i=e.CHM(t).$implicit,g=e.oxw();return e.KtG(g.handleCategoryEvent(g.editCategoryAction,null==i?null:i.id,null==i?null:i.name))}),e.qZA(),e.TgZ(7,"button",15),e.NdJ("click",function(){const i=e.CHM(t).$implicit,g=e.oxw();return e.KtG(g.handleDeleteCategoryEvent(null==i?null:i.id,null==i?null:i.name))}),e.qZA()()()()}if(2&o){const t=s.$implicit;e.xp6(2),e.Oqu(e.xi3(3,1,null==t?null:t.name,25))}}const N=function(){return["name","amount"]},O=function(){return{"min-width":"75rem"}},Y=function(){return{width:"50vw"}};let R=(()=>{class o{constructor(){this.categories=[],this.categoryEvent=new e.vpe,this.deleteCategoryEvent=new e.vpe,this.addCategoryAction=l.ADD_CATEGORY_ACTION,this.editCategoryAction=l.EDIT_CATEGORY_ACTION}handleCategoryEvent(t,r,n){t&&""!==t&&this.categoryEvent.emit({action:t,id:r,categoryName:n})}handleDeleteCategoryEvent(t,r){""!==t&&""!==r&&this.deleteCategoryEvent.emit({category_id:t,categoryName:r})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-categories-table"]],inputs:{categories:"categories"},outputs:{categoryEvent:"categoryEvent",deleteCategoryEvent:"deleteCategoryEvent"},decls:8,vars:14,consts:[[1,"grid"],[1,"col-12"],["styleClass","shadow-3 m-5 text-indigo-800","header","Categorias de produtos"],["dataKey","id","currentPageReportTemplate","Mostrando {first} de {last} de {totalRecords} produtos",3,"value","rows","paginator","responsive","globalFilterFields","tableStyle","selection","rowHover","showCurrentPageReport","selectionChange"],["productsTable",""],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","name"],[1,"flex","justify-content-between","align-items-center"],["field","name"],["type","text","field","name","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],[1,"flex","justify-content-center"],["styleClass","p-button-info","icon","pi pi-plus","label","Adicionar",3,"onClick"],[1,"flex","justify-content-center","gap-3","align-content-center","align-items-center"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-warning",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"p-card",2)(3,"p-table",3,4),e.NdJ("selectionChange",function(i){return r.categorySelected=i}),e.YNc(5,D,11,3,"ng-template",5),e.YNc(6,Z,8,4,"ng-template",6),e.qZA()()(),e._UZ(7,"p-confirmDialog"),e.qZA()),2&t&&(e.xp6(3),e.Q6J("value",r.categories)("rows",10)("paginator",!0)("responsive",!0)("globalFilterFields",e.DdM(11,N))("tableStyle",e.DdM(12,O))("selection",r.categorySelected)("rowHover",!0)("showCurrentPageReport",!0),e.xp6(4),e.Akn(e.DdM(13,Y)))},dependencies:[T.Z,m.jx,C.Hq,C.zx,p.iA,p.lQ,p.fz,p.xl,b.Q,F.T],encapsulation:2}),o})();const I=[{path:"",component:(()=>{class o{constructor(t,r,n,i,g){this.categoriesService=t,this.dialogService=r,this.messageService=n,this.confirmationService=i,this.router=g,this.destroy$=new v.x,this.categoriesDatas=[]}ngOnInit(){this.getCategoriesDatas()}getCategoriesDatas(){this.categoriesService.getAllCategories().pipe((0,d.R)(this.destroy$)).subscribe({next:t=>{t&&(this.categoriesDatas=t)},error:t=>{console.log(t),this.messageService.add({severity:"error",summary:"Erro",detail:"Erro ao buscar categorias!",life:3e3}),this.router.navigate(["/dashboard"])}})}handleCategoryAction(t){t&&(this.ref=this.dialogService.open(x,{header:t?.action,width:"70%",contentStyle:{overflow:"auto"},baseZIndex:1e4,maximizable:!0,data:{event:t}}),this.ref.onClose.pipe((0,d.R)(this.destroy$)).subscribe({next:()=>this.getCategoriesDatas()}))}handleDeleteCategoryAction(t){t&&this.confirmationService.confirm({message:`Confirma a exclus\xe3o da categoria: ${t?.categoryName}?`,header:"Confirma\xe7\xe3o de exclus\xe3o",icon:"pi pi-exclamation-triangle",acceptLabel:"Sim",rejectLabel:"N\xe3o",accept:()=>this.deleteCategory(t?.category_id)})}deleteCategory(t){this.categoriesService.deleteCategory({category_id:t}).pipe((0,d.R)(this.destroy$)).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Sucesso",detail:"Categoria removida com sucesso!",life:3e3}),this.getCategoriesDatas()},error:r=>{console.log(r),this.messageService.add({severity:"error",summary:"Erro",detail:"Erro ao remover categoria!",life:3e3}),this.getCategoriesDatas()}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f.G),e.Y36(u.xA),e.Y36(m.ez),e.Y36(m.YP),e.Y36(h.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-categories"]],decls:2,vars:1,consts:[[3,"categories","categoryEvent","deleteCategoryEvent"]],template:function(t,r){1&t&&(e._UZ(0,"app-toolbar-navigation"),e.TgZ(1,"app-categories-table",0),e.NdJ("categoryEvent",function(i){return r.handleCategoryAction(i)})("deleteCategoryEvent",function(i){return r.handleDeleteCategoryAction(i)}),e.qZA()),2&t&&(e.xp6(1),e.Q6J("categories",r.categoriesDatas))},dependencies:[S.p,R],encapsulation:2}),o})()}];var J=a(4466),$=a(529),M=a(4028),G=a(3520),w=a(7188),z=a(7913),U=a(3054),j=a(3608);let B=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[u.xA,m.YP],imports:[E.ez,c.u5,c.UX,h.Bz.forChild(I),J.m,$.JF,T.d,C.hJ,p.U$,G.zz,z.Iu,A.j,U.A,w.L$,u.DL,M.kW,b.D,j.z]}),o})()}}]);