"use strict";(self.webpackChunkng_sales_system=self.webpackChunkng_sales_system||[]).push([[908],{5908:(H,h,e)=>{e.r(h),e.d(h,{ProductsModule:()=>z});var v=e(6895),g=e(433),f=e(8250),x=e(529),P=e(4247),p=e(5593),c=e(4684),Z=e(3520),y=e(7913),M=e(1740),D=e(7188),b=e(3054),E=e(4028),u=e(5849),T=e(2137),A=e(3608),l=e(805),S=e(4466),w=e(7579),m=e(2722),U=e(546),t=e(8256),O=e(6423),F=e(8395),J=e(52),C=e(743),B=e(4431);function I(n,i){if(1&n){const o=t.EpF();t.TgZ(0,"tr")(1,"th",7)(2,"div",8)(3,"div",8),t._uU(4," Nome "),t.qZA(),t.TgZ(5,"div",8),t._UZ(6,"p-sortIcon",9)(7,"p-columnFilter",10),t.qZA()()(),t.TgZ(8,"th",11)(9,"div",8)(10,"div",8),t._uU(11," Quantidade "),t.qZA(),t.TgZ(12,"div",8),t._UZ(13,"p-sortIcon",12)(14,"p-columnFilter",13),t.qZA()()(),t.TgZ(15,"th",14)(16,"div",8)(17,"div",8),t._uU(18," Pre\xe7o "),t.qZA(),t.TgZ(19,"div",8),t._UZ(20,"p-sortIcon",15)(21,"p-columnFilter",16),t.qZA()()(),t.TgZ(22,"th",17)(23,"div",8)(24,"div",8),t._uU(25," Descri\xe7\xe3o "),t.qZA(),t.TgZ(26,"div",8),t._UZ(27,"p-sortIcon",18)(28,"p-columnFilter",19),t.qZA()()(),t.TgZ(29,"th",20)(30,"div",8)(31,"div",8),t._uU(32," Categoria "),t.qZA(),t.TgZ(33,"div",8),t._UZ(34,"p-sortIcon",21)(35,"p-columnFilter",22),t.qZA()()(),t.TgZ(36,"th")(37,"div",23)(38,"p-button",24),t.NdJ("onClick",function(){t.CHM(o);const d=t.oxw();return t.KtG(d.handleProductEvent(d.addProductAction))}),t.qZA()()()()}2&n&&(t.xp6(7),t.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),t.xp6(7),t.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),t.xp6(7),t.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),t.xp6(7),t.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),t.xp6(7),t.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1))}function R(n,i){if(1&n){const o=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"shorten"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"currency"),t.qZA(),t.TgZ(9,"td",25),t._uU(10),t.ALo(11,"shorten"),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td")(15,"div",26)(16,"button",27),t.NdJ("click",function(){const s=t.CHM(o).$implicit,a=t.oxw();return t.KtG(a.handleProductEvent(a.editProductAction,null==s?null:s.id))}),t.qZA(),t.TgZ(17,"button",28),t.NdJ("click",function(){const s=t.CHM(o).$implicit,a=t.oxw();return t.KtG(a.handleDeleteProduct(null==s?null:s.id,null==s?null:s.name))}),t.qZA()()()()}if(2&n){const o=i.$implicit;t.xp6(2),t.Oqu(t.xi3(3,6,null==o?null:o.name,25)),t.xp6(3),t.Oqu(null==o?null:o.amount),t.xp6(2),t.Oqu(t.xi3(8,9,null==o?null:o.price,"BRL")),t.xp6(2),t.Q6J("pTooltip",null==o?null:o.description),t.xp6(1),t.hij(" ",t.xi3(11,12,null==o?null:o.description,25)," "),t.xp6(3),t.Oqu(null==o||null==o.category?null:o.category.name)}}const $=function(){return["name","amount"]},N=function(){return{"min-width":"75rem"}};let Q=(()=>{class n{constructor(){this.products=[],this.productEvent=new t.vpe,this.deleteProductEvent=new t.vpe,this.addProductAction=C.h.ADD_PRODUCT_ACTION,this.editProductAction=C.h.EDIT_PRODUCT_ACTION}handleProductEvent(o,r){o&&""!==o&&this.productEvent.emit(r&&""!==r?{action:o,id:r}:{action:o})}handleDeleteProduct(o,r){""!==o&&""!==r&&this.deleteProductEvent.emit({product_id:o,productName:r})}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-products-table"]],inputs:{products:"products"},outputs:{productEvent:"productEvent",deleteProductEvent:"deleteProductEvent"},decls:7,vars:11,consts:[[1,"grid"],[1,"col-12"],["styleClass","shadow-3 m-5 text-indigo-800","header","Produtos em estoque"],["dataKey","id","currentPageReportTemplate","Mostrando {first} de {last} de {totalRecords} produtos",3,"value","rows","paginator","responsive","globalFilterFields","tableStyle","selection","rowHover","showCurrentPageReport","selectionChange"],["productsTable",""],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","name"],[1,"flex","justify-content-between","align-items-center"],["field","name"],["type","text","field","name","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","amount"],["field","amount"],["type","text","field","amount","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","price"],["field","price"],["type","text","field","price","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","description"],["field","description"],["type","text","field","description","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","category.name"],["field","category.name"],["type","text","field","category.name","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],[1,"flex","justify-content-center"],["styleClass","p-button-info","icon","pi pi-plus","label","Adicionar","pTooltip","Adicionar produto","tooltipPosition","top",3,"onClick"],["tooltipPosition","top","placeholder","Top",3,"pTooltip"],[1,"flex","justify-content-center","gap-3","align-content-center","align-items-center"],["pButton","","pRipple","","icon","pi pi-pencil","tooltipPosition","top","pTooltip","Editar produto",1,"p-button-rounded","p-button-warning",3,"click"],["pButton","","pRipple","","icon","pi pi-trash","tooltipPosition","top","pTooltip","Remover produto",1,"p-button-rounded","p-button-danger",3,"click"]],template:function(o,r){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"p-card",2)(3,"p-table",3,4),t.NdJ("selectionChange",function(s){return r.productSelected=s}),t.YNc(5,I,39,15,"ng-template",5),t.YNc(6,R,18,15,"ng-template",6),t.qZA()()()()),2&o&&(t.xp6(3),t.Q6J("value",r.products)("rows",10)("paginator",!0)("responsive",!0)("globalFilterFields",t.DdM(9,$))("tableStyle",t.DdM(10,N))("selection",r.productSelected)("rowHover",!0)("showCurrentPageReport",!0))},dependencies:[P.Z,l.jx,p.Hq,p.zx,c.iA,c.lQ,c.fz,c.xl,A.u,v.H9,B.T],encapsulation:2}),n})();const Y=function(){return{width:"50vw"}},j=[{path:"",component:(()=>{class n{constructor(o,r,d,s,a,L){this.productsService=o,this.productDataTransferService=r,this.dialogService=d,this.messageService=s,this.confirmationService=a,this.router=L,this.destroy$=new w.x,this.productsDatas=[]}ngOnInit(){this.getServiceProductsDatas()}getServiceProductsDatas(){const o=this.productDataTransferService.getProductsDatas();o.length>0?this.productsDatas=o:this.getAPIProductsDatas()}getAPIProductsDatas(){this.productsService.getAllProducts().pipe((0,m.R)(this.destroy$)).subscribe({next:o=>{o.length>0&&(this.productsDatas=o)},error:o=>{console.log(o),this.messageService.add({severity:"error",summary:"Erro",detail:"Erro ao buscar produtos",life:3e3}),this.router.navigate(["/dashboard"])}})}handleProductAction(o){o&&(this.ref=this.dialogService.open(U.d,{header:o?.action,width:"70%",contentStyle:{overflow:"auto"},baseZIndex:1e4,maximizable:!0,data:{event:o,productDatas:this.productsDatas}}),this.ref.onClose.pipe((0,m.R)(this.destroy$)).subscribe({next:()=>this.getAPIProductsDatas()}))}handleDeleteProductAction(o){o&&this.confirmationService.confirm({message:`Confirma a exclus\xe3o do produto: ${o?.productName}?`,header:"Confirma\xe7\xe3o de exclus\xe3o",icon:"pi pi-exclamation-triangle",acceptLabel:"Sim",rejectLabel:"N\xe3o",accept:()=>this.deleteProduct(o?.product_id)})}deleteProduct(o){this.productsService.deleteProduct(o).pipe((0,m.R)(this.destroy$)).subscribe({next:r=>{r&&(this.messageService.add({severity:"success",summary:"Sucesso",detail:"Produto removido com sucesso!",life:3e3}),this.getAPIProductsDatas())},error:r=>{console.log(r),this.messageService.add({severity:"error",summary:"Erro",detail:"Erro ao remover produto!",life:3e3})}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(O.s),t.Y36(F.H),t.Y36(u.xA),t.Y36(l.ez),t.Y36(l.YP),t.Y36(f.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-products"]],decls:3,vars:4,consts:[[3,"products","productEvent","deleteProductEvent"]],template:function(o,r){1&o&&(t._UZ(0,"app-toolbar-navigation"),t.TgZ(1,"app-products-table",0),t.NdJ("productEvent",function(s){return r.handleProductAction(s)})("deleteProductEvent",function(s){return r.handleDeleteProductAction(s)}),t.qZA(),t._UZ(2,"p-confirmDialog")),2&o&&(t.xp6(1),t.Q6J("products",r.productsDatas),t.xp6(1),t.Akn(t.DdM(3,Y)))},dependencies:[J.p,T.Q,Q],encapsulation:2}),n})()}];let z=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[u.xA,l.YP],imports:[v.ez,g.u5,g.UX,f.Bz.forChild(j),S.m,x.JF,P.d,p.hJ,c.U$,Z.zz,y.Iu,M.j,b.A,D.L$,u.DL,E.kW,T.D,A.z]}),n})()}}]);